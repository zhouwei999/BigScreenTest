// 入口文件
import './index.scss'  
const $ = require('jquery');
const echarts = require('echarts'); 
require('datatables.net');

import * as common from './pages/js/common'; 
 
common.pageResize();
const scale = common.scale;

// 顶部时间天气 
let today = new Date(); 
let todayStr = today.getFullYear()+"年" + (today.getMonth()+1) + "月" + today.getDate() + '日';
$("#todayDate").text(todayStr);
let weathers = common.get7Weather();
let todayWeather = weathers[0].night_air_temperature + '~' + weathers[0].day_air_temperature +'℃\xa0\xa0\xa0\xa0\xa0\xa0' + weathers[0].day_weather
$("#todayWeather").text(todayWeather);

// 地图部分
let color1 = ["#035594", "#117aab", "#28a2b8", "#64c4c1", "#86cfbb"];
let infoMarker = [];  

const map = new AMap.Map('container', {
    mapStyle: 'amap://styles/f9dc19577b889055541eb1b760ef102a',
    features: ['bg', 'road'], //'point'
    center: [120.425224, 37.365791],
    zoom: 15.5,
    pitch: 55,
    // rotation: 35,
    viewMode: '3D'
});
 
let object3Dlayer = new AMap.Object3DLayer();
 
// 设置光照
map.AmbientLight = new AMap.Lights.AmbientLight([1, 1, 1], 0.5);
map.DirectionLight = new AMap.Lights.DirectionLight([0, 0, 1], [1, 1, 1], 1);
 
let area = [{"coordinates":[[120.444454973611,37.3926157661066],
[120.445298736644,37.39252134862],[120.445239316712,37.3917471207445],
[120.444882797121,37.3903874817091],[120.443979614156,37.3904441338279],
[120.443991498142,37.3905385539308],[120.444454973611,37.3926157661066]],
"spid":"1","height":"2125.7927498354993"},
{"coordinates":[[120.443753818414,37.3905385539308],[120.440117318582,37.3910106526614],
[120.440545142092,37.3931633851833],[120.442791215518,37.3928329258743],
[120.444300481788,37.3926440913293],[120.444086570033,37.3915582834642],
[120.443837006319,37.3905574379371],[120.443753818414,37.3905385539308]],
"spid":"2","height":"2262.288825094605"},{"coordinates":[[120.44059921423,37.3932747968506],
[120.441074573685,37.3952669605731],[120.444128758185,37.394898744727],
[120.443677166702,37.39284992096],[120.443204184044,37.3928631393574],
[120.44059921423,37.3932747968506]],"spid":"null","height":"1528.2806111773828"},{"coordinates":[[120.440461359988,37.3932540251963],[120.437504624176,37.3935863709731],[120.438255692115,37.3967435823577],[120.438350764006,37.396804006159],[120.441126863225,37.3963734855119],[120.440461359988,37.3932540251963]],"spid":"null","height":"2076.138147671277"},{"coordinates":[[120.433545335467,37.3939027590067],[120.436171696457,37.3936535008645],[120.439430285523,37.3932626171085],[120.439026229986,37.3911570970835],[120.433131772741,37.3919974238263],[120.433545335467,37.3939027590067]],"spid":"null","height":"1644.0547009228471"},{"coordinates":[[120.433110381565,37.3919011171943],[120.440003093666,37.3909644815367],[120.439565762967,37.3887814707515],[120.432682558056,37.3897634557873],[120.433110381565,37.3919011171943]],"spid":"null","height":"2223.98976419878"},{"coordinates":[[120.439238953342,37.3811652207812],[120.434780081652,37.3811878844212],[120.434732545706,37.3823814931201],[120.438582957294,37.3824117108153],[120.439238953342,37.3811652207812]],"spid":"null","height":"1522.0727575218134"},{"coordinates":[[120.426992109244,37.3851539159568],[120.429226298683,37.385408867951],[120.429357022533,37.3812539866658],[120.428596447405,37.3812539866658],[120.428537027473,37.3815467244767],[120.427051529175,37.3815278382008],[120.426992109244,37.3851539159568]],"spid":"null","height":"1691.1628371783158"},{"coordinates":[[120.427033465516,37.3789495650781],[120.427052479894,37.3810648711369],[120.429429277171,37.3810950893626],[120.429486320305,37.3789948936907],[120.427033465516,37.3789495650781]],"spid":"null","height":"2407.8469481238317"},{"coordinates":[[120.424111351718,37.3847570704366],[120.424111351718,37.3839412139117],[120.422171885141,37.3838052369611],[120.422114842006,37.3846513117582],[120.424017040402,37.3848747645619],[120.424111351718,37.3847570704366]],"spid":"null","height":"1703.0165942033448"},{"coordinates":[[120.421900027069,37.3804027489823],[120.420317080083,37.3802554336568],[120.420331340866,37.3818872180336],[120.421785940799,37.3820118667693],[120.421900027069,37.3804027489823]],"spid":"null","height":"1526.5676465648341"},{"coordinates":[[120.420160211462,37.3803914170445],[120.420131689895,37.3802865965383],[120.418470308599,37.3802356027256],[120.418263527236,37.3843489921992],[120.421693245705,37.3845756186696],[120.421764549624,37.3820770239805],[120.420274297732,37.3820345301535],[120.420160211462,37.3803914170445]],"spid":"null","height":"2411.529046691485"},{"coordinates":[[120.418064826984,37.3836332257655],[120.416429590458,37.3836634429561],[120.416353532945,37.3842224587885],[120.418045812606,37.3843584349825],[120.418064826984,37.3836332257655]],"spid":"null","height":"2336.623050917814"},{"coordinates":[[120.41768453942,37.3863225080564],[120.416106346028,37.386398048301],[120.416182403541,37.3875462506488],[120.417760596932,37.3875160350228],[120.41768453942,37.3863225080564]],"spid":"null","height":"2281.1167767411234"},{"coordinates":[[120.418583919509,37.3762266250707],
[120.416283179745,37.3761284094171],[120.416159586287,37.3762039599313],[120.416406773204,37.376702591416],[120.416159586287,37.3791201516141],[120.415921906559,37.379369458077],[120.415978949694,37.3800191619345],[120.418317718214,37.3801098178393],[120.418583919509,37.3762266250707]],"spid":"null","height":"2104.921249067453"},{"coordinates":[[120.418752830569,37.377112826652],[120.418657758678,37.3781705130423],[120.420996527197,37.3782611711816],[120.421167656601,37.377369694718],[120.418752830569,37.377112826652]],"spid":"null","height":"1671.5812417174936"},{"coordinates":[[120.415480666029,37.3759380564115],[120.412756856351,37.3757454017671],[120.41345563475,37.3800176856274],[120.415837185621,37.3800403496144],[120.415751620919,37.3797003890917],[120.41579440327,37.3793037665341],[120.41589898235,37.3792055549101],[120.416022575808,37.3791073431575],[120.41504333533,37.37869938527],[120.414986292196,37.3785558440041],[120.41526200068,37.3773999490595],[120.415746867324,37.3769768719465],[120.415822924837,37.3766520075435],[120.415689824189,37.3761835959273],[120.415756374513,37.3759418339486],[120.415480666029,37.3759380564115]],"spid":"null","height":"2167.509842293423"},{"coordinates":[[120.413293220269,37.3801303759391],[120.41111132037,37.38032301932],[120.408230642071,37.3805836536947],[120.408729769499,37.3833939146276],[120.409599677302,37.3832239421602],[120.410170108648,37.3832352736701],[120.411082798803,37.3830653008432],[120.411553404663,37.3829406538586],[120.41403478102,37.3827366856188],[120.413293220269,37.3801303759391]],"spid":"null","height":"1832.6532896008594"},{"coordinates":[[120.410487054565,37.3788785596402],[120.407901099129,37.3789692169238],[120.408148286045,37.3804348278004],[120.408230681684,37.3804556030064],[120.410666898892,37.3802289640842],[120.410487054565,37.3788785596402]],"spid":"null","height":"1943.5207509858315"},{"coordinates":[[120.409198038176,37.3857867713102],[120.409521282605,37.3873731117996],[120.411422720426,37.3872673568112],[120.411213562266,37.3856507977065],
[120.409198038176,37.3857867713102]],"spid":"null","height":"2104.0491500999174"},{"coordinates":[[120.408665635586,37.3732157248294],[120.408076189861,37.3750743175584],[120.409521282605,37.3751498691343],[120.40957832574,37.3745907856707],[120.410357915246,37.3746361169176],[120.410472001516,37.3734726062418],[120.408665635586,37.3732157248294]],"spid":"null","height":"1980.9210152441144"},{"coordinates":[[120.409198038176,37.3707677519415],[120.408570563695,37.3730646177053],[120.41085228908,37.3734877168858],[120.411156519131,37.3725206295379],[120.410586087785,37.3722939666373],[120.410662145298,37.3713268638994],[120.409825512657,37.3712059751805],[120.409920584548,37.3708735301991],[120.409198038176,37.3707677519415]],"spid":"null","height":"1972.2852332136658"},{"coordinates":[[120.412962885061,37.3723241883969],[120.412734712523,37.3734423849449],[120.412753726901,37.3754520746769],[120.414236848401,37.3755880667738],[120.41435093467,37.3750440969067],[120.414065718997,37.3749383245301],[120.414065718997,37.3745454543964],[120.41520658169,37.3745605648242],[120.415586869254,37.3719161936141],[120.413647402677,37.3717046398902],[120.413438244516,37.3722788557528],[120.412962885061,37.3723241883969]],"spid":"null","height":"2108.025458017475"},{"coordinates":[[120.409419476455,37.3700046329497],[120.409200811106,37.3706544179286],[120.410845554821,37.3710473084413],[120.411092741738,37.3702917479367],[120.409419476455,37.3700046329497]],"spid":"null","height":"1576.3900084686154"},{"coordinates":[[120.410146776422,37.3670087491817],[120.409433737239,37.3698044073742],[120.411810534515,37.370257747535],[120.412380965861,37.3679721296469],[120.411097495332,37.3677832324915],[120.411049959387,37.3671976482871],[120.410146776422,37.3670087491817]],"spid":"null","height":"2239.9503211074825"},{"coordinates":[[120.415529033854,37.3707488629512],[120.415628859339,37.3701821910318],[120.415457729935,37.3698081852202],[120.415158253479,37.3696268483979],[120.414487996647,37.3694795119071],[120.413347133954,37.369366175948],[120.41317600455,37.3705108612665],[120.415529033854,37.3707488629512]],"spid":"null","height":"1725.389385732216"},{"coordinates":[[120.413375655521,37.3673166544793],[120.414777965915,37.3672977646201],[120.416679403735,37.3673166544793],[120.418200553992,37.3659187920546],[120.418129250074,37.3654087546853],[120.418200553992,37.3641808727247],[120.413565799304,37.3640297474024],[120.413375655521,37.3673166544793]],"spid":"null","height":"1904.511091555349"},{"coordinates":[[120.418566976906,37.3591872790845],[120.418852192579,37.3603585679512],[120.420183199053,37.3603774595573],[120.420230734999,37.3608308566774],[120.420135663108,37.3619076638592],[120.420278270944,37.3636078542668],[120.420492182699,37.3636267450549],[120.420920006209,37.3637589804387],[120.421561741474,37.3633622735881],[120.422274780656,37.3631733648269],[120.422417388493,37.3590550356446],[120.419446391898,37.3590361437056],[120.418566976906,37.3591872790845]],"spid":"null","height":"1827.9387857334932"},{"coordinates":[[120.418968655645,37.3545718451911],[120.418919265798,37.3545787726479],[120.41879567234,37.3554931913437],[120.418719614827,37.3561431019915],[120.418605528557,37.3571481852847],[120.420049860726,37.3572648143793],[120.42016014412,37.3566345616944],[120.420441556917,37.3566481643261],[120.420688743834,37.3549538619949],[120.420614587759,37.354954428784],[120.420590819786,37.354822177886],[120.420341256072,37.3548032848815],[120.420341256072,37.3546615871965],[120.418968655645,37.3545718451911]],"spid":"null","height":"1983.4674966631478"},{"coordinates":[[120.420750984232,37.3561764790337],[120.420596492409,37.3561638839252],[120.420382580654,37.3572722453845],[120.420228088831,37.3573855996112],[120.419087226139,37.3573289225193],[120.418968386275,37.3589725408093],[120.420596492409,37.3588591889794],[120.421725471115,37.3588686349718],[120.422307786448,37.3589064189294],[120.422438510298,37.3562803885984],[120.420750984232,37.3561764790337]],"spid":"null","height":"1816.2730477027962"},{"coordinates":[[120.420781882597,37.3547053560656],[120.420567970842,37.3561109844464],[120.422412365528,37.3562205618969],[120.422554973365,37.3552419162418],[120.422055845937,37.3552003518581],[120.422084367504,37.3547998211635],[120.420781882597,37.3547053560656]],"spid":"null","height":"2154.0977301890516"},{"coordinates":[[120.42171287409,37.3544125135064],[120.423081909321,37.3545032003565],[120.423167474023,37.353414950924],[120.421641570171,37.3533582708339],[120.42171287409,37.3544125135064]],"spid":"null","height":"2040.905035536798"},{"coordinates":[[120.419260019301,37.3504108471697],[120.418033591906,37.3503995107014],[120.417648550748,37.353074869741],[120.418974803628,37.3531542221548],[120.419260019301,37.3504108471697]],"spid":"null","height":"1720.0666647857913"},{"coordinates":[[120.423224517157,37.3502748094376],[120.419321221831,37.3504028171715],[120.41907760011,37.3529818194821],[120.419440061695,37.3529770961156],[120.419499481626,37.352703140352],[120.42101468989,37.3527550975564],[120.420984979924,37.3531613071877],[120.422149610589,37.3532793909705],[120.423094387507,37.3532699442747],[120.423224517157,37.3502748094376]],"spid":"null","height":"1728.0171209938921"},{"coordinates":[[120.419544640775,37.3527461231328],[120.419340236209,37.3542349181076],[120.420804343331,37.3543558341694],[120.420946951167,37.3528179184919],[120.419544640775,37.3527461231328]],"spid":"null","height":"1862.2931141626796"},{"coordinates":[[120.417571899035,37.3521547534834],[120.41688738142,37.352200098286],[120.41661642653,37.3539571882905],[120.417343726497,37.3540478756906],[120.417571899035,37.3521547534834]],"spid":"null","height":"2327.668589702371"},{"coordinates":[[120.417657463737,37.3504089577584],[120.415775040295,37.3504656400754],[120.415646693242,37.3515312596708],[120.415418520703,37.3516106137163],[120.415361477569,37.3523021239916],[120.416088777535,37.3523588048792],[120.41630268929,37.3521434172785],[120.41661642653,37.3520527275776],[120.417415030415,37.3520413913572],[120.417657463737,37.3504089577584]],"spid":"null","height":"2258.493255834417"},{"coordinates":[[120.415432781487,37.3538778367254],[120.416495209869,37.3539968640416],[120.416794686326,37.3521547534834],[120.416545122612,37.3521377491754],[120.416352602033,37.352222770677],[120.416188603021,37.3523758091372],[120.416174342237,37.3525515195772],[120.415618171674,37.3525741918621],[120.415432781487,37.3538778367254]],"spid":"null","height":"2477.827646914395"},{"coordinates":[[120.414534352116,37.3515822729954],[120.414377483496,37.3538041530541],[120.415311564826,37.3538608328077],[120.415518346189,37.3525515195772],[120.415261652083,37.3525628557204],[120.415297304042,37.3519450334153],[120.415040609936,37.3519280290598],[120.415062001112,37.3515879411405],[120.414534352116,37.3515822729954]],"spid":"null","height":"1718.384473446061"},{"coordinates":[[120.411806977242,37.3516739079545],[120.412092192915,37.3522633920271],[120.412139728861,37.3523994261557],[120.412434451723,37.353608607576],[120.414240817653,37.353782425804],[120.414364411111,37.3514547396188],[120.411806977242,37.3516739079545]],"spid":"null","height":"2297.490414790495"},{"coordinates":[[120.413148441625,37.3504888798131],[120.411141830524,37.3504841562898],[120.411837043728,37.3516177933639],[120.413280948073,37.3514855365874],[120.413262527894,37.35120307312],[120.413148441625,37.3504888798131]],"spid":"null","height":"2179.9023679158777"},{"coordinates":[[120.41019467681,37.3489020741583],[120.411107366964,37.3503909453687],[120.412885211326,37.3503531571245],[120.412733096301,37.3483427951106],[120.412571474086,37.3483352372571],[120.412580981275,37.3478288593395],[120.411620755175,37.3479649015036],[120.411221453233,37.3479724593944],[120.41019467681,37.3489020741583]],"spid":"null","height":"1873.0631061612671"},{"coordinates":[[120.412942254461,37.3485241833663],[120.413122891054,37.3503304841689],[120.414463404718,37.3503002535506],[120.414482419096,37.3492950785644],[120.414263753746,37.3492875208067],[120.414311289692,37.3484788363435],[120.413712336778,37.3484637206631],[120.41337958516,37.3484788363435],[120.412942254461,37.3485241833663]],"spid":"null","height":"1595.5636272124368"},{"coordinates":[[120.414529955041,37.3485241833663],[120.414370115424,37.3485237110017],[120.414340405459,37.349236978283],[120.414589969173,37.3492511490874],[120.414644041311,37.3493404250942],[120.414658302094,37.3502586864307],[120.417795674499,37.3502020039575],[120.417781413715,37.3484108157578],[120.414529955041,37.3485241833663]],"spid":"null","height":"1577.669569179681"},{"coordinates":[[120.423728259533,37.3529252335323],[120.423728259533,37.3540437191872],[120.424774050335,37.3541495210215],[120.424755035957,37.3546634135241],[120.427036761342,37.3548145577082],[120.427036761342,37.3529856926424],[120.423728259533,37.3529252335323]],"spid":"null","height":"1908.2779104111162"},{"coordinates":[[120.43226571535,37.3552679884345],[120.434908713921,37.3555702740636],[120.435155900837,37.3554947027705],[120.435498159645,37.3554040171182],[120.43576436094,37.3550866164727],[120.435821404075,37.3544215821964],[120.435612245914,37.3543913532257],[120.432531916645,37.3542855517322],[120.43226571535,37.3552679884345]],"spid":"null","height":"1865.6436285782795"},{"coordinates":[[120.432493887888,37.3559179010322],[120.432360787241,37.3559027868496],[120.432284729728,37.3582907899441],[120.432360787241,37.3584116994723],[120.435346044619,37.3585023814906],[120.43555520278,37.3582907899441],[120.435593231536,37.3564166673489],[120.435327030241,37.3560539285382],[120.432493887888,37.3559179010322]],"spid":"null","height":"2239.0720719599703"},{"coordinates":[[120.431597359955,37.3557369084961],[120.429600850243,37.3555555376674],[120.429524792731,37.3554195092583],[120.427224052967,37.3552381376625],[120.426197276544,37.3551927946951],[120.426178262166,37.3563717029457],[120.426729679134,37.3564926155654],[120.426672635999,37.3565984139479],[120.426615592865,37.3570064920264],[120.427604340532,37.3570669478493],[120.427642369288,37.3582911677866],[120.429353663327,37.3583969636339],[120.431635388712,37.3584271909914],[120.431597359955,37.3557369084961]],"spid":"null","height":"2407.3403367974956"},{"coordinates":[[120.425957220019,37.3568704662468],[120.426325623597,37.3581513659025],[120.427566311775,37.3582571619468],[120.427552050991,37.3571614099752],[120.427109966698,37.3571444068013],[120.426539535352,37.3571160681697],[120.425957220019,37.3568704662468]],"spid":"null","height":"2367.568273928968"},{"coordinates":[[120.426001111542,37.358300487903],[120.423434170484,37.3582098056407],[120.42347219924,37.3592526450418],[120.425544766465,37.3592375315307],[120.426305341593,37.3589654878117],[120.426001111542,37.358300487903]],"spid":"null","height":"1506.3375889399401"},{"coordinates":[[120.426939946466,37.3584294265559],[120.426356838867,37.3583299281277],[120.426556489839,37.3591762902933],[120.425463163092,37.3593652091166],[120.425006818015,37.3593576523728],[120.423343059921,37.3593803226019],[120.423113302851,37.3640968407863],[120.426773570657,37.3641724034179],[120.426939946466,37.3584294265559]],"spid":"null","height":"1627.5035626447757"},{"coordinates":[[120.427126921185,37.3610805702688],[120.426993820538,37.3641711440413],[120.430169221699,37.3642013690732],[120.430245279211,37.361216588418],[120.427126921185,37.3610805702688]],"spid":"null","height":"2196.5185986703154"},{"coordinates":[[120.432319747874,37.3586646957324],[120.432248443956,37.3586420252872],[120.432291226307,37.3617704820021],[120.43448738699,37.3617931515023],[120.434601473259,37.361373764639],[120.435171904606,37.3613510950121],[120.435414337928,37.3587327070272],[120.432319747874,37.3586646957324]],"spid":"null","height":"2027.57135641051"},{"coordinates":[[120.435914732981,37.35879580634],[120.43581966109,37.361758013774],[120.441542988931,37.3618638047342],[120.441619046444,37.3589167150546],[120.435914732981,37.35879580634]],"spid":"null","height":"1915.4600267318501"},{"coordinates":[[120.436237977411,37.3565287318752],[120.436176180681,37.3565291097267],[120.436062094412,37.3584617950035],[120.437851822761,37.3584958007505],[120.437837561977,37.3578043475327],[120.437987300206,37.357798302012],[120.437873213937,37.3562566783378],[120.43656122184,37.3562415642234],[120.436237977411,37.3565287318752]],"spid":"null","height":"2071.5039186138074"},{"coordinates":[[120.437958778638,37.3585524769613],[120.441773538267,37.3586601616439],[120.44213718825,37.3566651361249],[120.438058604124,37.3562797273562],[120.438030082557,37.3573169258627],[120.438557731552,37.3574189446137],[120.438600513903,37.3576399847652],[120.439021207021,37.3576569878267],[120.439049728588,37.3578496889225],[120.438557731552,37.3578213505571],[120.438529209985,37.3579120332888],[120.438001560989,37.3579460392849],[120.437958778638,37.3585524769613]],"spid":"null","height":"2248.669803281454"},{"coordinates":[[120.442360131835,37.3569902760031],[120.441975090676,37.3586905778158],[120.443843253335,37.3586905778158],[120.443843253335,37.3571603079177],[120.442360131835,37.3569902760031]],"spid":"null","height":"1735.3274036795522"},{"coordinates":[[120.398179114893,37.3427159200845],[120.398141086136,37.3440613067047],[120.399319977585,37.344152006059],[120.399662236393,37.344998528083],[120.400689012816,37.3448020148923],[120.399985480822,37.3430031394764],[120.399776322662,37.3430182562562],[120.399738293906,37.342731036922],[120.398179114893,37.3427159200845]],"spid":"null","height":"1632.806280808227"},{"coordinates":[[120.396125562046,37.3401157787615],[120.395669216969,37.3424286995939],[120.396334720206,37.3424135826956],[120.396372748963,37.3422775304735],[120.397133324091,37.342232179678],[120.397304453495,37.341325158017],[120.398007985489,37.3412646895168],[120.398046014245,37.3403576561707],[120.398730531861,37.3404634772922],[120.398730531861,37.3401762481869],[120.397418539764,37.3401611308351],[120.397456568521,37.3398285483265],[120.397000223443,37.3397831960521],[120.396962194687,37.3401762481869],[120.396125562046,37.3401157787615]],"spid":"null","height":"1974.4591441570017"},{"coordinates":[[120.399434063854,37.3410681665548],[120.399719279527,37.3418996063409],[120.401886918643,37.3419903083062],[120.4019249474,37.3426403358513],[120.404130615272,37.3425496346712],[120.404092586516,37.3419449573372],[120.403807370843,37.3415821485998],[120.403674270195,37.3409774634757],[120.4034080689,37.3409623462853],[120.403274968253,37.3407809397621],[120.402761580041,37.3406448845822],[120.402419321233,37.3407355880628],[120.402495378746,37.3410832837239],[120.401487616701,37.3412193381096],[120.401297472919,37.3407809397621],[120.399434063854,37.3410681665548]],"spid":"null","height":"1681.9857299692992"},{"coordinates":[[120.429993639401,37.394431572942],[120.433356213347,37.3939340035033],[120.432486305544,37.3893679179633],[120.429705452731,37.3910221647043],[120.429833799784,37.3922911511605],[120.429819539,37.3924157826004],[120.42966267038,37.3924950934088],[120.429876582135,37.3943871978132],[120.429993639401,37.394431572942]],"spid":"null","height":"2104.7559292053647"},{"coordinates":[[120.444221108283,37.3948724903484],[120.444734496494,37.3948101766968],[120.445518839596,37.3929803981942],[120.445525969987,37.3926235012064],[120.443800415165,37.3928217775205],[120.444221108283,37.3948724903484]],"spid":"null","height":"1687.1834420902094"},{"coordinates":[[120.439194182044,37.4004525622221],[120.441846687804,37.4004185754945],[120.443928762218,37.3962607495424],[120.438067580135,37.3970424837457],[120.439194182044,37.4004525622221]],"spid":"null","height":"2321.364500121916"},{"coordinates":[[120.440163915332,37.390883305061],[120.444898495506,37.3902563562341],[120.444689337346,37.3891610716063],[120.444404121673,37.3889042439292],[120.443672068112,37.3885869849958],[120.443187201468,37.3885114469566],[120.439498412095,37.3880582171233],[120.440163915332,37.390883305061]],"spid":"null","height":"1952.7202535006465"}]
    
// initMap(area,color1);
initChart1(scale,"chart1");
initChart2();
initChart3();
initChart4();
initChart5();
initChart6();
initChart7();
initChart8();
initChart9();
initChart10();
initWarningTable();
 
$(".setButton").click(()=>{ 
    if($(".centerTable").css('display') == "none") $(".centerTable").show();
    else $(".centerTable").hide(); 
})  
 
$(".toseebig").click(()=>{  
    // $('#tobig1').css('transform', 'scale(' + 1.2 + ')'); 

    $(".hideInfo").show();
    $(".toBigDiv").show();
    $("#bigTitle").text('供电负荷趋势（kWh）')
    initChart1(scale*2,"chartBig");
})

$("#cancelBig").click(()=>{
    $(".hideInfo").hide();
    $(".toBigDiv").hide();
})
  
// 选择地图中显示供电或者供气等
$("#chooseElectric").click(()=>{
    $("#chooseElectric").addClass('choose');$("#chooseElectric").removeClass('no_choose');
    $("#chooseGas,#chooseWarm,#chooseWater").addClass('no_choose');
    $("#chooseGas,#chooseWarm,#chooseWater").removeClass('choose');
 
    // 清除地图上所有添加的覆盖物 
    map.clearMap();
    initMap(area,color1,1); 
    map.setCenter([120.425224, 37.365791]);
    map.setZoom(15.5)
})

$("#chooseGas").click(()=>{
    $("#chooseGas").addClass('choose');$("#chooseGas").removeClass('no_choose');
    $("#chooseElectric,#chooseWarm,#chooseWater").addClass('no_choose');
    $("#chooseElectric,#chooseWarm,#chooseWater").removeClass('choose');
  
    let color2 = ["#E76C65", "#449F36", "#28a2b8", "#64c4c1", "#86cfbb"];
    map.clearMap();
    initMap(area,color2,2.5); 
    map.setCenter([120.440998, 37.395958]);
    map.setZoom(16.8) 
})

$("#chooseWarm").click(()=>{
    $("#chooseWarm").addClass('choose');$("#chooseWarm").removeClass('no_choose');
    $("#chooseGas,#chooseElectric,#chooseWater").addClass('no_choose');
    $("#chooseGas,#chooseElectric,#chooseWater").removeClass('choose');
})

$("#chooseWater").click(()=>{
    $("#chooseWater").addClass('choose');$("#chooseWater").removeClass('no_choose');
    $("#chooseGas,#chooseWarm,#chooseElectric").addClass('no_choose');
    $("#chooseGas,#chooseWarm,#chooseElectric").removeClass('choose');
})
 

// 初始化地图
function initMap(area,colors,fontSizeBig){
    let layer = new Loca.PolygonLayer({
        map: map,
        fitView: false,
        eventSupport: true,
        zIndex:50
    });
     
    layer.setData(area, {
        lnglat: 'coordinates'
    });
    
    layer.setOptions({
        style: {
            opacity:1,
            color: function (res) {
                var index = res.index;
                return colors[index % colors.length];
            },
            height: function (res) { 
                return Number((Number(res.value.height)).toFixed(0));
            }
        },
        selectStyle: {
            color: 'yellow',
            opacity: 1,
            // height: 6000
        }
    });

    // mousemove
    layer.on('click', function (ev) { 
        let centerLngLat = common.getCenter(ev.rawData.coordinates); 
        let height = Number((Number(ev.rawData.height)).toFixed(0));
          
        let boxDetail = new AMap.Text({
            text: '<div style="font-size: 2.2rem;font-weight: 100;padding: 0.5rem 1.8rem;display: inline-grid;border:0.4rem solid #26729F;background-color:rgba(13, 35, 94, 0.76);box-shadow:rgb(11, 234, 235) 0px 0px 18px inset;">'+
                    '<div>TBR'+ev.rawData.spid+'厂</div>'+
                    '<div>用电量：<span style="color:#01D2F7">1366MW</span></div>'+
                    '<div>用气量：<span style="color:#01D2F7">1366t/h</span></div>'+
                    '<div>用水量：<span style="color:#01D2F7">1366t/h</span></div>'+
                    '<div>产量：<span style="color:#01D2F7">1366个</span></div>'+
                    '</div>', 
            anchor: 'bottom-right',
            position: [centerLngLat.lng, centerLngLat.lat],
            height: height,
            style: {
                'background-color': 'transparent',  
                'border': 'none',
                'color': 'white',
                'font-size': '2rem',
                'font-weight': 600
            } 
        });
            
        infoMarker.push(boxDetail)
        if(infoMarker.length>1){
            for(let i=0;i<infoMarker.length;i++){
                if(i!=infoMarker.length-1){
                    map.remove(infoMarker[i]);
                }
            } 
        } 
        boxDetail.setMap(map); 
    });
    layer.render();

    map.add(object3Dlayer); 
    for(let i=0;i<area.length;i++){ 
        let height = Number((Number(area[i].height)).toFixed(0));  
        let centerLngLat = common.getCenter(area[i].coordinates); 
         
        let text = new AMap.Text({
            text: i+'号厂区</br>(' + 1200 + ')',
            anchor: 'center',
            position: [centerLngLat.lng, centerLngLat.lat],
            height: height,
            bubble:false,
            clickable:false,
            style: {
                'background-color': 'transparent', 
                'text-align': 'left',
                'border': 'none',
                'color': 'white',
                'font-size': fontSizeBig+'rem',
                'font-weight': 500
            }, 
            zIndex:30,
            extData:{
                pathArr:area[i].coordinates
            } 
        });
     
        let linePath = [
            new AMap.LngLat(116.425401,39.961951),
            new AMap.LngLat(116.425373,39.965298),
            new AMap.LngLat(116.425411,39.961951),
            new AMap.LngLat(116.418511,39.961431),
        ]
        let lineHeight = [0,0,0]
     
        let meshLine = new AMap.Object3D.MeshLine({
            path: linePath ,
            height: lineHeight,
            color: 'rgba(215, 164, 10, 0.9)',
            width: 20*scale
        })
      
        object3Dlayer.add(meshLine);
        
        text.setMap(map);  
    } 
}

// 图表部分
function initChart1(scale,initDiv){
    // 图表数据
    let lineXValue = [];
    for(let i=1;i<13;i++){
        lineXValue.push(2*i+":00")
    } 
    let charts = { 
        names: ['燃煤机组', '太阳能','购电'],
        lineX: lineXValue,
        value: [
            [120, 132, 101, 134, 90, 230, 210, 182, 191, 234, 260, 280],
            [220, 182, 191, 210, 230, 270, 270,201, 154, 140, 240, 250],
            [150, 232, 201, 154, 190, 180, 210,150, 182, 201, 154, 190]
        ]

    }
    
    // 初始化图表
    let chart = echarts.init(document.getElementById(initDiv));  

    let color = ['rgba(23, 255, 243', 'rgba(119,61,190','rgba(252,230,48']
    let lineY = [] 
    for (let i = 0; i < charts.names.length; i++) {
        let x = i
        if (x > color.length - 1) {
            x = color.length - 1
        }
        let data = {
            name: charts.names[i],
            type: 'line',
            color: color[x] + ')',
            smooth: true,
            areaStyle: {
                normal: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                        offset: 0,
                        color: color[x] + ', 0.3)'
                    }, {
                        offset: 0.8,
                        color: color[x] + ', 0)'
                    }], false),
                    shadowColor: 'rgba(0, 0, 0, 0.1)',
                    shadowBlur: 200   // 折现下面延伸的阴影范围
                }
            },
            symbol: 'circle',
            symbolSize: 3,
            data: charts.value[i]
        }
        lineY.push(data)
    }
 
    let option = {
        // backgroundColor:'rgba(13, 35, 94, 0.2)',
        tooltip: {
            trigger: 'axis',
            textStyle: {
                fontWeight: 'normal',
                fontSize: 25 * scale, 
            },
        },
        legend: {
            data: charts.names,
            textStyle: {
                fontSize: 25*scale,
                color: 'white', 
                fontWeight: 'normal',
            },  
            left:'center',
        },
        grid: {
            top: '14%',
            left: '0',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'category',
            boundaryGap: false,
            data: charts.lineX,
            axisLabel: {
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                },   
                formatter: function(params) {
                    return params.split(' ')[0] 
                }
            },
            axisTick:{
                show:false
            },
            axisLine: { 
                lineStyle: {
                    color: 'rgb(44,85,123,0.5)', 
                    width: 5 * scale 
                } 
            },
        },
        yAxis: { 
            type: 'value',
            axisLabel: {
                formatter: '{value}',
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            },
            splitLine: {
                show:false
            },
            axisTick:{
                show:false
            },
            axisLine: {
                lineStyle: {
                    color: 'rgb(44,85,123,0.5)', 
                    width: 5 * scale 
                }
            }
        },
        series: lineY
    }
 
    chart.setOption(option);

    $(window).resize(function () {
        chart.resize();
    });
}

function initChart2(){
    // 图表数据
    let data = [{
            value: 909,
            name: '密炼'
        },
        {
            value: 1212,
            name: '四厂'
        },
        {
            value: 1612,
            name: '吴产'
        },
        {
            value: 1012,
            name: '六产'
        }
    ];
     
    // 初始化图表
    let chart = echarts.init(document.getElementById("chart2"));  
    let color = ['rgb(131,249,103)', '#FBFE27', '#FE5050', '#1DB7E5'] 
     
    let option = { 
        tooltip: {
            trigger: 'item',
            formatter: "{b} : {c} ({d}%)",
            textStyle: {
                fontWeight: 'normal',
                fontSize: 25 * scale, 
            },
        },
    
        visualMap: {
            show: false,
            min: 500,
            max: 600,
            inRange: {
                //colorLightness: [0, 1]
            }
        },
        series: [{ 
            type: 'pie',
            radius: '55%',
            center: ['50%', '50%'],
            color: color, 
            data: data.sort(function(a, b) {
                return a.value - b.value
            }),
            roseType: 'radius',
    
            label: {
                normal: {
                    formatter: ['{a|{b}}', '{b|{d}%,{c} kWh}'].join('\n'),
                    rich: {
                        a: {
                            color: '#fff',
                            fontSize: 30*scale,
                            // fontWeight:'bold',
                            lineHeight: 20*scale
                        }, 
                        b: {
                            color: 'rgb(1,210,247)',
                            fontSize: 25*scale,
                            height: 30*scale
                        },
                    },
                } 
            },
            labelLine: {
                normal: {
                    lineStyle: {
                        color: '#fff',
                    },
                    smooth: 0.2,
                    length: 10*scale,
                    length2: 20*scale,
    
                }
            },
            itemStyle: {
                normal: {
                    shadowColor: 'rgba(0, 0, 0, 0.8)',
                    shadowBlur: 50,
                }
            }
        }]
    };
 
    chart.setOption(option);
}

function initChart3(){
    // 图表数据
    let xData = function() {
        var data = [];
        for (var i = 0; i < 7; i++) {
            data.push('11-' + (22+i));
        }
        return data;
    }()
     
    // 初始化图表
    let chart = echarts.init(document.getElementById("chart3"));   
    let option = { 
        "tooltip": {
            "trigger": "axis",
            "axisPointer": {
                "type": "shadow",
                textStyle: {
                    color: "#fff"
                } 
            },
        },
        "grid": { 
            top: '14%',
            left: '0',
            right: '4%',
            bottom: '3%',
            containLabel: true,
            textStyle: {
                color: "#fff",
                // fontWeight: 'normal',
                fontSize: 25 * scale, 
            }
        },
        "legend": {
            x: '4%',
            top: '8%',
            left:'center',
            itemWidth:20*scale,
            itemHeight:20*scale,
            textStyle: {
                color: '#fff',
                fontSize: 25 * scale,
            },
            "data": ['煤', '天然气']
        }, 
        "calculable": true,
        "xAxis": [{
            "type": "category",
            axisLine: { 
                lineStyle: {
                    color: 'rgb(44,85,123,0.5)', 
                    width: 5 * scale 
                } 
            },
            "splitLine": {
                "show": false
            },
            "axisTick": {
                "show": false
            },
            "splitArea": {
                "show": false
            },
            "axisLabel": {
                "interval": 0,
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }, 
            },
            "data": xData,
        }],
        "yAxis": [{
            "type": "value",
            "splitLine": {
                "show": false
            },
            axisLine: {
                lineStyle: {
                    color: 'rgb(44,85,123,0.5)', 
                    width: 5 * scale 
                }
            },
            "axisTick": {
                "show": false
            },
            axisLabel: {
                "interval": 0,
                formatter: '{value}',
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            }, 
            "splitArea": {
                "show": false
            },
    
        }], 
        "series": [{
                "name": "煤",
                "type": "bar",
                "stack": "总量",
                "barMaxWidth": 35*scale,
                "barGap": "10%",
                "itemStyle": {
                    "normal": {
                        "color": "#2B9FF8", 
                    }
                },
                "data": [
                    709,
                    1917,
                    2455, 
                    1719,
                    1433,
                    1544, 
                    2484, 
                ],
            },
    
            {
                "name": "天然气",
                "type": "bar",
                "barMaxWidth": 35*scale,
                "stack": "总量",
                "itemStyle": {
                    "normal": {
                        "color": "#FDBE03", 
                    }
                },
                "data": [
                    327,
                    1776,
                    507, 
                    800, 
                    204,
                    1390,  
                    220
                ]
            } 
        ]
    }
 
    chart.setOption(option);
}

function initChart4(){
    // 图表数据
    let xData = function() {
        var data = [];
        for (var i = 0; i < 7; i++) {
            data.push('11-' + (22+i));
        }
        return data;
    }()
     
    // 初始化图表
    let chart = echarts.init(document.getElementById("chart4"));   
    let option = { 
        "tooltip": {
            "trigger": "axis",
            "axisPointer": {
                "type": "shadow"
            },
            textStyle: {
                fontWeight: 'normal',
                fontSize: 25 * scale, 
            },
        },
        grid: { 
            top: '24%',
            left: '0',
            right: '10%',
            bottom: '8%',
            containLabel: true, 
        },
        "legend": { 
            right: '10%',
            bottom: '4%',
            top:'3%',
            textStyle: {
                color: '#fff',
                fontSize: 25 * scale,
            },
            data: ['半钢轮胎', '全钢轮胎'],
            itemWidth:20*scale,
            itemHeight:20*scale,
        },  
        "xAxis": [{
            "type": "category",
            data: xData,
            axisLine: {
                lineStyle: {
                    // color: 'rgba(255,255,255,0.3)',
                    width: 0 
                }
          },
          axisTick:{
            show:false
          },
          axisLabel: { 
            textStyle: {
              fontFamily: 'Microsoft YaHei',
              color:'#fff',
              fontSize: 23*scale,  // x轴字大小
            }
          }, 
        }],
        yAxis: {
            type: 'value', 
            axisLine: {
              show: false,
              lineStyle: {
                color: 'white',  
                // width: 1.3* scale,    
              }
            },
            axisTick:{
              show:false
            },
            splitLine: {
              show: true,
              lineStyle: {
                color: 'rgba(255,255,255,0.3)',
                width: 0.3* scale, 
              }
            }, 
            axisLabel: {  
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            }, 
        }, 
        series: [{
            name: '半钢轮胎',
            type: 'bar',
            barWidth: '15%',
            barGap:'80%',
            itemStyle: {
              normal: {
                  color: '#1170E4', 
              },
            },
            "label": {
              "normal": {
                  "show": true,
                  "position": "top",
                  "formatter": "{c}",
                   color:'#fff',
                   fontSize: 23*scale,
              }, 
            },
            data: [400, 400, 300, 300, 300, 400, 400, 400, 300]
          },
          {
            name: '全钢轮胎',
            type: 'bar',
            barGap:'80%',
            barWidth: '15%',
            itemStyle: {
              normal: {
                   color: '#25ECED', 
              }
              
            },
            "label": {
              "normal": {
                  "show": true,
                  "position": "top",
                  "formatter": "{c}",
                   color:'#fff',
                   fontSize: 23*scale,
              }, 
            },
            data: [500, 400, 500, 500, 500, 400,400, 500, 500]
        }]
    };
   
    chart.setOption(option);
}

function initChart5(){
    // 图表数据
    let xData = function() {
        var data = [];
        for (var i = 0; i < 7; i++) {
            data.push('2019 11-' + (24+i));
        }
        return data;
    }()
     
    // 初始化图表
    let chart = echarts.init(document.getElementById("chart5"));   
    let option = { 
        "tooltip": {
            "trigger": "axis",
            "axisPointer": {
                "type": "shadow"
            },
            textStyle: {
                fontWeight: 'normal',
                fontSize: 25 * scale, 
            },
        },
        grid: { 
            top: '24%',
            left: '0',
            right: '10%',
            bottom: '8%',
            containLabel: true, 
        },
        "legend": { 
            right: '10%',
            bottom: '4%',
            top:'3%',
            textStyle: {
                color: '#fff',
                fontSize: 25 * scale,
            },
            data: ['半钢轮胎', '全钢轮胎'],
            itemWidth:20*scale,
            itemHeight:20*scale,
        },  
        "xAxis": [{
            "type": "category",
            data: xData,
            axisLine: {
                lineStyle: {
                    color: 'rgba(255,255,255,0)',
                    width: 0 
                }
          },
          axisTick:{
            show:false
          },
          axisLabel: { 
            textStyle: {
              fontFamily: 'Microsoft YaHei',
              color:'#fff',
              fontSize: 23*scale,  // x轴字大小
            }
          }, 
        }],
        yAxis: {
            type: 'value', 
            axisLine: {
              show: false,
              lineStyle: {
                color: 'white',  
                // width: 1.3* scale,    
              }
            },
            axisTick:{
              show:false
            },
            splitLine: {
              show: true,
              lineStyle: {
                color: 'rgba(255,255,255,0.3)',
                width: 0.3* scale, 
              }
            }, 
            axisLabel: {  
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            }, 
        }, 
        series: [{
            name: '半钢轮胎',
            type: 'bar',
            barWidth: '15%',
            barGap:'80%',
            itemStyle: {
              normal: {
                  color: '#1170E4', 
              },
            },
            "label": {
              "normal": {
                  "show": true,
                  "position": "top",
                  "formatter": "{c}",
                   color:'#fff',
                   fontSize: 23*scale,
              }, 
            },
            data: [400, 400, 300, 300, 300, 400, 400, 400, 300]
          },
          {
            name: '全钢轮胎',
            type: 'bar',
            barGap:'80%',
            barWidth: '15%',
            itemStyle: {
              normal: {
                   color: '#25ECED', 
              }
              
            },
            "label": {
              "normal": {
                  "show": true,
                  "position": "top",
                  "formatter": "{c}",
                   color:'#fff',
                   fontSize: 23*scale,
              }, 
            },
            data: [500, 400, 500, 500, 500, 400,400, 500, 500]
        }]
    };
   
    chart.setOption(option);
}

function initChart6(){  
    let hot = [];let cold = [];let mid = [];let lineXValue = [];
    for(let i = 0;i<7;i++){
        hot.push(weathers[i].day_air_temperature);
        cold.push(weathers[i].night_air_temperature);
        mid.push(((Number(weathers[i].night_air_temperature)+Number(weathers[i].day_air_temperature))/2).toFixed(0));
        lineXValue.push(weathers[i].daytime.substring(4,6)+'-'+weathers[i].daytime.substring(6,8))
    }

    // 图表数据
    let charts = { 
        names: ['最低温度', '最高温度','平均温度'],
        lineX: lineXValue,
        value: [cold, hot,mid ] 
    }
    
    // 初始化图表
    let chart = echarts.init(document.getElementById("chart6"));  

    let color = ['#DDF776', '#53F3F3','#0696F9']
    let lineY = [] 
    for (let i = 0; i < charts.names.length; i++) {
        let x = i
        if (x > color.length - 1) {
            x = color.length - 1
        }
        let data = {
            name: charts.names[i],
            type: 'line', 
            color: color[x], 
            symbol: 'circle',
            symbolSize: 12*scale,
            data: charts.value[i]
        }
        lineY.push(data)
    }
 
    let option = {
        // backgroundColor:'rgba(13, 35, 94, 0.2)',
        tooltip: {
            trigger: 'axis',
            textStyle: {
                fontWeight: 'normal',
                fontSize: 25 * scale, 
            },
        },
        legend: {
            data: charts.names,
            left: 'center',
            bottom: '4%',
            top:'3%',
            textStyle: {
                fontSize: 25*scale,
                color: 'white', 
            },  
            itemWidth:20*scale,
            itemHeight:20*scale, 
        },
        grid: {
            top: '24%',
            left: '0',
            right: '10%',
            bottom: '8%',
            containLabel: true,
        },
        xAxis: [{
            type: "category",
            data: charts.lineX,
            axisLine: {
                lineStyle: {
                    // color: 'rgba(255,255,255,0.3)',
                    width: 0 
                }
          },
          axisTick:{
            show:false
          },
          axisLabel: { 
            textStyle: {
              fontFamily: 'Microsoft YaHei',
              color:'#fff',
              fontSize: 23*scale,  // x轴字大小
            }
          }, 
        }], 
        yAxis: {
            type: 'value', 
            axisLine: {
              show: false,
              lineStyle: {
                color: 'white',  
                // width: 1.3* scale,    
              }
            },
            axisTick:{
              show:false
            },
            splitLine: {
              show: true,
              lineStyle: {
                color: 'rgba(255,255,255,0.3)',
                width: 1.3* scale,  // 中间分割线粗细
              }
            }, 
            axisLabel: {  
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            }, 
        },
        series: lineY
    }
 
    chart.setOption(option);
}

function initChart7(){
    // 图表数据
    let xData = function() {
        var data = [];
        for (var i = 0; i < 7; i++) {
            data.push('2019 11-' + (24+i));
        }
        return data;
    }()
     
    // 初始化图表
    let chart = echarts.init(document.getElementById("chart7"));   
    let option = { 
        "tooltip": {
            "trigger": "axis",
            "axisPointer": {
                "type": "shadow"
            },
            textStyle: {
                fontWeight: 'normal',
                fontSize: 25 * scale, 
            },
        },
        grid: { 
            top: '24%',
            left: '0',
            right: '10%',
            bottom: '8%',
            containLabel: true, 
        }, 
        "xAxis": [{
            "type": "category",
            data: xData,
            axisLine: {
                lineStyle: {
                    color: 'rgba(255,255,255,0)',
                    width: 0 
                }
          },
          axisTick:{
            show:false
          },
          axisLabel: { 
            textStyle: {
              fontFamily: 'Microsoft YaHei',
              color:'#fff',
              fontSize: 23*scale,  // x轴字大小
            }
          }, 
        }],
        yAxis: {
            type: 'value', 
            axisLine: {
              show: false,
              lineStyle: {
                color: 'white',  
                // width: 1.3* scale,    
              }
            },
            axisTick:{
              show:false
            },
            splitLine: {
              show: true,
              lineStyle: {
                color: 'rgba(255,255,255,0.3)',
                width: 0.3* scale,  // 中间分割线粗细
              }
            }, 
            axisLabel: {  
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            }, 
        }, 
        series: [{ 
            type: 'bar', 
            barWidth: '20%',
            itemStyle: {
                normal: { 
                    color: new echarts.graphic.LinearGradient(
                        0, 0, 0, 1,
                        [
                            {offset: 0, color: 'rgba(0,244,255,1)'},
                            {offset: 1, color: 'rgba(0,77,167,1)'}
                        ]
                    )
                }
            },
            "label": {
              "normal": {
                  "show": true,
                  "position": "top",
                  "formatter": "{c}",
                   color:'#fff',
                   fontSize: 23*scale,
              }, 
            },
            data: [500, 400, 500, 500, 500, 400,400, 500, 500]
        }]
    };
   
    chart.setOption(option);
}

function initChart8(){
    // 图表数据 
    let xData = [];let rateData= [];
    for (var i = 0; i < 7; i++) {
        xData.push('2019 11-' + (24+i));
        rateData.push((300+i*Math.random()*300).toFixed(2))
    }  
     
    // 初始化图表
    let chart = echarts.init(document.getElementById("chart8"));   
    let option = { 
        tooltip: {
            "trigger": "axis",
            "axisPointer": {
                "type": "line"
            },
            lineStyle:{
                width:5*scale
            },
            textStyle: {
                fontWeight: 'normal',
                fontSize: 25 * scale, 
            },
        },
        grid: { 
            top: '24%',
            left: '0',
            right: '10%',
            bottom: '8%',
            containLabel: true, 
        },  
        tooltip: {
            trigger: 'axis', 
            axisPointer: {
                type: 'shadow',
                label: {
                    show: true,
                    backgroundColor: '#7B7DDC'
                }
            }
        },
        "legend": { 
            left: 'center',
            bottom: '4%',
            top:'3%',
            textStyle: {
                color: '#fff',
                fontSize: 25 * scale,
            },
            data: ['蒸汽', '负荷'],
            itemWidth:20*scale,
            itemHeight:20*scale,
        },  
        xAxis: [{
            "type": "category",
            data: xData,
            axisLine: {
                lineStyle: {
                    color: 'rgba(255,255,255,0)',
                    width: 0 
                }
            },
            axisTick:{
                show:false
            },
            axisLabel: { 
                textStyle: {
                    fontFamily: 'Microsoft YaHei',
                    color:'#fff',
                    fontSize: 23*scale,  // x轴字大小
                }
            }, 
        }],
        yAxis: [{
            name: '单位：t',
            nameTextStyle:{
                fontSize:23*scale,
                fontWeight:'normal',
                lineHeight:56*scale
            },
            type: 'value', 
            axisLine: {
              show: false,
              lineStyle: {
                color: 'white',  
                // width: 1.3* scale,    
              }
            },
            axisTick:{
              show:false
            },
            splitLine: {
              show: false, 
            }, 
            axisLabel: {  
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            }, 
        },{
            name: '单位：GT',
            nameTextStyle:{
                fontSize:23*scale,
                fontWeight:'normal',
                lineHeight:56*scale
            },
            type: 'value', 
            axisLine: {
              show: false,
              lineStyle: {
                color: 'white',  
                // width: 1.3* scale,    
              }
            },
            axisTick:{
              show:false
            },
            splitLine: {
              show: true,
              lineStyle: {
                color: 'rgba(255,255,255,0.3)',
                width: 0.3* scale, 
              }
            }, 
            axisLabel: {  
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            }, 
        }], 
        series: [{
            name: '蒸汽',
            type: 'line',
            smooth: true, 
            yAxisIndex: 1,
            itemStyle: {
                    normal: {
                    color:'#DDF776'
                },
            },
            data: rateData
        },{ 
            name: '负荷',
            type: 'bar', 
            barWidth: '15%',
            itemStyle: {
                normal: {
                    color: new echarts.graphic.LinearGradient(
                        0, 0, 0, 1,
                        [
                            {offset: 0, color: 'rgba(132,211,114,1)'},
                            {offset: 1, color: 'rgba(17,190,179,1)'}
                        ]
                    )
                } 
            },
            data: [500, 400, 500, 500, 500, 400,400]
        }]
    };
   
    chart.setOption(option);
}

function initChart9(){
    // 图表数据
    let xData = function() {
        var data = [];
        for (var i = 0; i < 6; i++) {
            data.push('11-' + (22+i));
        }
        data.push('11-29(今天)');
        return data;
    }()

    let data_val=[2220, 1682, 2791, 3000, 4090, 3230, 2910];
     
    // 初始化图表
    let chart = echarts.init(document.getElementById("chart9"));   
    let option = { 
        "tooltip": { 
            textStyle: {
                fontWeight: 'normal',
                fontSize: 25 * scale, 
            },
            backgroundColor:'#384157',
            borderColor:'#384157',
            borderWidth:1 * scale,
            formatter:'{b}:{c}',
            extraCssText:'box-shadow: 0 0 5px rgba(0, 0, 0, 1)'
        },
        grid: { 
            top: '24%',
            left: '0',
            right: '10%',
            bottom: '8%',
            containLabel: true, 
        }, 
        "xAxis": [{
            interval:0,
            "type": "category",
            boundaryGap: ['20%', '20%'],
            data: xData,
            axisLine: {
                show:false
            },
            axisTick:{
                show:false
            },
            axisLabel: { 
                textStyle: {
                fontFamily: 'Microsoft YaHei',
                color:'#fff',
                fontSize: 23*scale,  // x轴字大小
                }
            }, 
        }],
        yAxis: {
            type: 'value', 
            axisLine: {
              show: false, 
            },
            axisTick:{
              show:false
            },
            splitLine: {
              show: true,
              lineStyle: {
                color: 'rgba(255,255,255,0.3)',
                width: 0.3* scale, 
              }
            }, 
            axisLabel: {  
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            }, 
        }, 
        series: [{ 
            type: 'bar', 
            barWidth: '5%',
            animation:false,
            hoverAnimation:false,
            tooltip:{
                show:false
            },
            itemStyle: {
                normal: {
                    color:'#055AA0',
                    opacity:0.6,
                    label:{
                        show:false
                    }
                }
            }, 
            data: data_val
        },{
            type: 'line', 
            animation:false,
            symbol:'circle', 
            hoverAnimation:false,
            data:data_val,
            itemStyle:{
                normal:{ 
                    opacity:0,
                }
            },
            lineStyle:{
                normal:{
                    width:1* scale,
                    color:'#384157',
                    opacity:1
                }
            }
        },{
            type: 'line',
            name:'linedemo',
            smooth:true,
            symbolSize:10* scale,
            animation:false,
            lineWidth:1.2* scale,
            hoverAnimation:false,
            data:data_val,
            symbol:'circle',
            itemStyle:{
                normal:{
                    color:'#055AA0',
                    shadowBlur: 40* scale,
                    label:{
                        show:true,
                        position:'top',
                        textStyle:{
                            color:'white',
                            fontSize:23* scale
                        }
                    }
                }
            },
            lineStyle:{
                normal:{
                    width:1.3* scale, 
                }
            },
             areaStyle: {
                normal: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                        offset: 0,
                        color: 'rgba(5,100,176, 0.8)'
                    }, {
                        offset: 1,
                        color: 'rgba(5,100,176, 0.2)'
                    }], false),
                    shadowColor: 'rgba(0, 0, 0, 0.1)',
                    shadowBlur: 500* scale   // 折现下面延伸的阴影范围
                }
            }, 
        }]
    };
   
    chart.setOption(option);
}

function initChart10(){
    // 图表数据
    let xData = function() {
        var data = [];
        for (var i = 0; i < 6; i++) {
            data.push('11-' + (22+i));
        }
        data.push('11-29(今天)');
        return data;
    }()
    let data =  [100, 50, 20,34,120,80,68]
    let dataCircle = [{
        value: 100,
        symbolPosition: 'end'
    }, {
        value: 50,
        symbolPosition: 'end'
    }, {
        value: 20,
        symbolPosition: 'end'
    },{
        value: 34,
        symbolPosition: 'end'
    }, {
        value: 120,
        symbolPosition: 'end'
    }, {
        value: 80,
        symbolPosition: 'end'
    },{
        value: 68,
        symbolPosition: 'end'
    }]
     
    // 初始化图表
    let chart = echarts.init(document.getElementById("chart10"));
    let option = {  
        grid: { 
            top: '24%',
            left: '0',
            right: '10%',
            bottom: '8%',
            containLabel: true, 
        }, 
        "xAxis": [{
            interval:1,
            "type": "category",
            data: xData, 
          axisTick:{
            show:false
          },
          axisLabel: { 
            textStyle: {
              fontFamily: 'Microsoft YaHei',
              color:'#fff',
              fontSize: 23*scale,  // x轴字大小
            }
          }, 
        }],
        yAxis: {
            name: '单位：t/h',
            nameTextStyle:{
                fontSize:23*scale,
                fontWeight:'normal',
                lineHeight:56*scale,
                color:'white'
            },
            type: 'value', 
            axisLine: {
              show: false,
            },
            axisTick:{
              show:false
            },
            splitLine: {
              show: true,
              lineStyle: {
                color: 'rgba(255,255,255,0.3)',
                width: 0.3* scale,  // 中间分割线粗细
              }
            }, 
            axisLabel: {  
                textStyle: {
                    color: 'white',
                    fontSize: 25*scale,
                }
            }, 
        }, 
        series:  [{ 
            type: 'pictorialBar',
            symbolSize: [35*scale, 16*scale],
            symbolOffset: [0, -10*scale],
            z: 12,
            itemStyle: {
                normal: {
                    color: '#14b1eb'
                }
            },
            data:dataCircle 
        }, { 
            type: 'pictorialBar',
            symbolSize: [35*scale, 16*scale],
            symbolOffset: [0, 10*scale],
            z: 12,
            itemStyle: {
                normal: {
                    color: '#14b1eb'
                }
            },
            data: data
        }, { 
            type: 'pictorialBar',
            symbolSize: [51*scale, 22*scale],
            symbolOffset: [0, 15*scale],
            z: 11,
            itemStyle: {
                normal: {
                    color: 'transparent',
                    borderColor: '#14b1eb',
                    borderWidth: 3
                }
            },
            data: data
        }, { 
            type: 'pictorialBar',
            symbolSize: [70*scale, 30*scale],
            symbolOffset: [0, 20*scale],
            z: 10,
            itemStyle: {
                normal: {
                    color: 'transparent',
                    borderColor: '#14b1eb',
                    borderType: 'dashed',
                    borderWidth: 3
                }
            },
            data: data
        }, {
            type: 'bar',
            itemStyle: {
                normal: {
                    color: '#14b1eb',
                    opacity: .7
                }
            },
            label: {
                normal: {
                    show: true,
                    lineHeight: 40*scale,
                    width: 100*scale,
                    height: 40*scale,
                    backgroundColor: '#00326C', 
                    borderRadius: 400*scale,
                    position: ['-8', '-70'],
                    distance: 2*scale,
                    formatter: [
                        '    {d|●}',
                        ' {a|{c}}     \n',
                        '    {b|}'
                    ].join(','),
                    rich: {
                        d: {
                            color: '#3CDDCF',
                            fontSize:23*scale
                        },
                        a: {
                            color: '#fff',
                            align: 'center',
                            fontSize:23*scale,
                        },
                        b: {
                            width: 2*scale,
                            height: 20*scale,
                            borderWidth: 2*scale,
                            borderColor: '#234e6c',
                            align: 'left', 
                        },
                    }
                }
            },
            silent: true,
            barWidth: 35*scale,
            barGap: '-100%', // Make series be overlap
            data: data
        }]   
    };
   
    chart.setOption(option);
}

// 告警列表
function initWarningTable() { 
    let warningData = [{name:'學校11',remark:"xxx",value:"123",level:"1",updateTime:"2019,23,22 00:00:00"},
        {name:'學校22',remark:"xxx",value:"123",level:"1",updateTime:"2019,23,22"},
        {name:'學校',remark:"xxx",value:"123",level:"1",updateTime:"2019,23,22"},
        {name:'學校',remark:"xxx",value:"123",level:"1",updateTime:"2019,23,22"},
        {name:'學校',remark:"xxx",value:"123",level:"1",updateTime:"2019,23,22"}]; 
    $('#warningTable').DataTable({
        data: warningData,
        destroy: true,
        // scrollCollapse: true,
        info: false,
        lengthChange: false,
        paging: false,
        searching: false,
        ordering: false,
        fixedHeader: true,
        serverSide: false,
        columns: [
            {
                title: '告警来源',
                data: "name",
                width: "21%",
                render: function (data, type, row, meta) {
                    if (row.serialNo === "*") {
                        return "全网";
                    } else {
                        return row.name;
                    }
                },
            }, {
                title: '告警内容',
                data: "remark",
                width: "18%",
                render: function (data, type, row, meta) {
                    return "<span title='" + data + "'>" + data.substring(0, 5) + "</span>";
                },
            }, {
                title: '异常值',
                data: "value",
                width: "15%",
            }, {
                title: '告警等级',
                data: "level",
                width: "18%",
                render: function (data, type, row, meta) {
                    if (data == 1) {
                        return "<div style='width:100%;text-align: center;'><div style='display: inline-block;width: 4.5rem;line-height: 3rem;color: #fff;text-align: center;background: #F8B356; border-radius: 0.3rem;font-weight: bold;'>一</div></div>"
                    } else if (data == 2) {
                        return "<div style='width:100%;text-align: center;'><div style='display: inline-block;width: 4.5rem;line-height: 3rem;color: #fff;text-align: center;background: #F8B356; border-radius: 0.3rem;font-weight: bold;'>二</div></div>"
                    } else if (data == 3) {
                        return "<div style='width:100%;text-align: center;'><div style='display: inline-block;width: 4.5rem;line-height: 3rem;color: #fff;text-align: center;background: #F8B356; border-radius: 0.3rem;font-weight: bold;'>三</div></div>"
                    } else if (data == 4) {
                        return "<div style='width:100%;text-align: center;'><div style='display: inline-block;width: 4.5rem;line-height: 3rem;color: #fff;text-align: center;background: #F8B356; border-radius: 0.3rem;font-weight: bold;'>四</div></div>"
                    }
                },

            }, {
                title: '生成时间',
                data: "updateTime",
                width: '28%',
            },
        ],
        columnDefs: [
            {
                "defaultContent": "-",
                "targets": "_all"
            }/*, {
                targets: [1, 2, 3, 4],
                render: function (data, type, row, meta) {
                    if (data || data == 0) {//data==undefined or null or NaN
                        return Number(data).toFixed(1);
                    }
                }
            }, {
                targets: [5, 6],
                render: function (data, type, row, meta) {
                    if (data || data == 0) {
                        return Number(data).toFixed(2);
                    }
                }
            },*/
        ],
        onInitComplete: function () {
            this.fnAdjustColumnSizing(true);
            $(window).resize(function () {
                this.columns.adjust().draw();
            });
        }
    });  
}